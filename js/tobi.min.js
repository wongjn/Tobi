(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.Tobi=e()})(this,function(){"use strict";var t=function(t){var e={},n=window,o=null,i=[],r=0,a=null,d=null,s=null,l=null,u=[],c=null,f=null,p=null,b=null,v=0,m={},h=!1,g=null,y=null,L=null,A=null,_=null,E=!1,w=0,k={image:{checkSupport:function(t){return!t.hasAttribute("data-type")&&t.href.match(/\.(png|jpg|tiff|tif|gif|bmp|webp|svg|ico)$/)},init:function(t,n){var o=document.createElement("figure"),i=document.createElement("img"),a=t.querySelector("img");if(i.style.opacity="0",i.alt=a&&a.alt?a.alt:"",i.setAttribute("src",""),i.setAttribute("data-src",t.href),o.appendChild(i),e.captions){var d=document.createElement("figcaption");d.style.opacity="0","self"===e.captionsSelector&&t.getAttribute(e.captionAttribute)?d.textContent=t.getAttribute(e.captionAttribute):"img"===e.captionsSelector&&a&&a.getAttribute(e.captionAttribute)&&(d.textContent=a.getAttribute(e.captionAttribute)),d.textContent&&(d.id="tobi-figcaption-"+r,o.appendChild(d),i.setAttribute("aria-labelledby",d.id),++r)}n.appendChild(o),n.setAttribute("data-type","image")},onPreload:function(t){k.image.onLoad(t)},onLoad:function(t){var e=t.querySelector("img");if(e.hasAttribute("data-src")){var n=t.querySelector("figcaption"),o=document.createElement("div");o.classList.add("tobi-loader"),t.appendChild(o),e.onload=function(){var o=t.querySelector(".tobi-loader");t.removeChild(o),e.style.opacity="1",n&&(n.style.opacity="1")},e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")}},onLeave:function(t){}},youtube:{checkSupport:function(t){return tt(t,"youtube")},init:function(t,e){},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){}},iframe:{checkSupport:function(t){return tt(t,"iframe")},init:function(t,e){var n=document.createElement("iframe"),o=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target");n.setAttribute("frameborder","0"),n.setAttribute("src",""),n.setAttribute("data-src",o),e.appendChild(n),e.setAttribute("data-type","iframe")},onPreload:function(t){},onLoad:function(t){var e=t.querySelector("iframe");e.setAttribute("src",e.getAttribute("data-src"))},onLeave:function(t){}},html:{checkSupport:function(t){return tt(t,"html")},init:function(t,e){var n=document.createElement("div"),o=t.hasAttribute("href")?t.getAttribute("href"):t.getAttribute("data-target"),i=document.querySelector(o);return i?(n.classList.add("tobi-html"),n.innerHTML=i.innerHTML,i.style.display="none",e.appendChild(n),void e.setAttribute("data-type","html")):console.log("Ups, I can't find the target "+o+".")},onPreload:function(t){},onLoad:function(t){},onLeave:function(t){var e=t.querySelector("video");e&&e.pause()}}},C=function(t){e=Y(t),o=j(),S();var n=document.querySelectorAll(e.selector);return(a=n.length)?void Array.prototype.forEach.call(n,function(t){x(t)}):console.log("Ups, I can't find the selector "+e.selector+".")},x=function(t){if(i.indexOf(t)===-1){if(i.push(t),e.zoom&&t.querySelector("img")){var n=document.createElement("div");n.classList.add("tobi-zoom__icon"),n.innerHTML=e.zoomText,t.classList.add("tobi-zoom"),t.appendChild(n)}t.addEventListener("click",function(t){t.preventDefault(),T(i.indexOf(this))}),X(t)}},S=function(){d=document.createElement("div"),d.setAttribute("role","dialog"),d.setAttribute("aria-hidden","true"),d.classList.add("tobi"),document.body.appendChild(d),c=document.createElement("button"),c.classList.add("tobi__prev"),c.setAttribute("type","button"),c.setAttribute("aria-label",e.navLabel[0]),c.innerHTML=e.navText[0],d.appendChild(c),s=document.createElement("div"),s.classList.add("tobi__overlay"),d.appendChild(s),l=document.createElement("div"),l.classList.add("tobi__slider"),d.appendChild(l),p=document.createElement("button"),p.classList.add("tobi__close"),p.setAttribute("type","button"),p.setAttribute("aria-label",e.closeLabel),p.innerHTML=e.closeText,d.appendChild(p),b=document.createElement("div"),b.classList.add("tobi__counter"),d.appendChild(b),f=document.createElement("button"),f.classList.add("tobi__next"),f.setAttribute("type","button"),f.setAttribute("aria-label",e.navLabel[1]),f.innerHTML=e.navText[1],d.appendChild(f),n.addEventListener("resize",function(){E||(E=!0,n.requestAnimationFrame(function(){z(),E=!1}))})},X=function(t){for(var e in k)if(k.hasOwnProperty(e)&&k[e].checkSupport(t)){var n=document.createElement("div"),o=document.createElement("div");n.classList.add("tobi__slider__slide"),n.style.position="absolute",n.style.left=100*w+"%",o.classList.add("tobi__slider__slide__content"),k[e].init(t,o),n.appendChild(o),l.appendChild(n),u.push(n),++w;break}},T=function(t){return"false"===d.getAttribute("aria-hidden")?void console.log("Tobi is already open."):(e.scroll||(document.documentElement.classList.add("tobi-is-open"),document.body.classList.add("tobi-is-open")),t||(t=0),!e.nav||1===a||"auto"===e.nav&&"ontouchstart"in window?(c.setAttribute("aria-hidden","true"),f.setAttribute("aria-hidden","true")):(c.setAttribute("aria-hidden","false"),f.setAttribute("aria-hidden","false")),e.counter&&1!==a?b.setAttribute("aria-hidden","false"):b.setAttribute("aria-hidden","true"),e.close||p.setAttribute("aria-hidden","true"),e.draggable&&(l.style.cursor="-webkit-grab"),g=document.activeElement,y=d.firstElementChild,L=d.lastElementChild,v=t,U(),V(),D(v),P(v+1),P(v-1),z(),H(),d.setAttribute("aria-hidden","false"),void B())},q=function(){"true"!==d.getAttribute("aria-hidden")&&(e.scroll||(document.documentElement.classList.remove("tobi-is-open"),document.body.classList.remove("tobi-is-open")),Z(),M(),d.setAttribute("aria-hidden","true"),g.focus())},P=function(t){if(void 0!==u[t]){var e=u[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onPreload(e)}},D=function(t){if(void 0!==u[t]){var e=u[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onLoad(e)}},M=function(){for(var t=0;t<a;t++){var e=u[t].querySelector(".tobi__slider__slide__content"),n=e.getAttribute("data-type");k[n].onLeave(e)}},Y=function(t){var e={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>'],navLabel:["Previous","Next"],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',closeLabel:"Close",counter:!0,download:!1,downloadText:"",downloadLabel:"Download",keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>',docClose:!0,swipeClose:!0,scroll:!1,draggable:!0,threshold:100};return t&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e},j=function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"},z=function(){A=-v*window.innerWidth,l.style[o]="translate3d("+A+"px, 0, 0)",_=A},H=function(){b.textContent=v+1+"/"+a},B=function(t){e.nav?(c.disabled=!1,f.disabled=!1,v===a-1?f.disabled=!0:0===v&&(c.disabled=!0),t||f.disabled?t||!f.disabled||c.disabled?f.disabled||"right"!==t?f.disabled&&"right"===t&&!c.disabled?c.focus():c.disabled||"left"!==t?c.disabled&&"left"===t&&!f.disabled&&f.focus():c.focus():f.focus():c.focus():f.focus()):e.close&&p.focus()},O=function(){v!==a-1&&M(),v<a-1&&(v++,z(),H(),B("right"),D(v),P(v+1))},I=function(){v>0&&M(),v>0&&(v--,z(),H(),B("left"),D(v),P(v-1))},U=function(){m={startX:0,endX:0,startY:0,endY:0}},W=function(){var t=m.endX-m.startX,n=m.endY-m.startY,o=Math.abs(t),i=Math.abs(n);t>0&&o>e.threshold&&v>0?I():t<0&&o>e.threshold&&v!==a-1?O():n<0&&i>e.threshold&&e.swipeClose?q():z()},F=function(t){t.target===c?I():t.target===f?O():(t.target===p||t.target.classList.contains("tobi__slider__slide")&&!t.target.classList.contains("tobi__slider__slide__content"))&&q(),t.stopPropagation()},K=function(t){9===t.keyCode?t.shiftKey?document.activeElement===y&&(L.focus(),t.preventDefault()):document.activeElement===L&&(y.focus(),t.preventDefault()):27===t.keyCode?(t.preventDefault(),q()):37===t.keyCode?(t.preventDefault(),I()):39===t.keyCode&&(t.preventDefault(),O())},N=function(t){t.stopPropagation(),h=!0,m.startX=t.touches[0].pageX,m.startY=t.touches[0].pageY},$=function(t){t.preventDefault(),t.stopPropagation(),h&&(m.endX=t.touches[0].pageX,m.endY=t.touches[0].pageY,l.style[o]="translate3d("+(_-Math.round(m.startX-m.endX))+"px, 0, 0)")},G=function(t){t.stopPropagation(),h=!1,m.endX&&W(),U()},J=function(t){t.preventDefault(),t.stopPropagation(),h=!0,m.startX=t.pageX,l.style.cursor="-webkit-grabbing"},Q=function(t){t.preventDefault(),h&&(m.endX=t.pageX,l.style[o]="translate3d("+(_-Math.round(m.startX-m.endX))+"px, 0, 0)")},R=function(t){t.stopPropagation(),h=!1,l.style.cursor="-webkit-grab",m.endX&&W(),U()},V=function(){e.keyboard&&document.addEventListener("keydown",K),e.docClose&&d.addEventListener("click",F),c.addEventListener("click",F),f.addEventListener("click",F),p.addEventListener("click",F),e.draggable&&(d.addEventListener("touchstart",N),d.addEventListener("touchmove",$),d.addEventListener("touchend",G),d.addEventListener("mousedown",J),d.addEventListener("mouseup",R),d.addEventListener("mousemove",Q))},Z=function(){e.keyboard&&document.removeEventListener("keydown",K),e.docClose&&d.removeEventListener("click",F),c.removeEventListener("click",F),f.removeEventListener("click",F),p.removeEventListener("click",F),e.draggable&&(d.removeEventListener("touchstart",N),d.removeEventListener("touchmove",$),d.removeEventListener("touchend",G),d.removeEventListener("mousedown",J),d.removeEventListener("mouseup",R),d.removeEventListener("mousemove",Q))},tt=function(t,e){return t.getAttribute("data-type")===e},et=function(t){x(t),a++},nt=function(){if(l)for(;l.firstChild;)l.removeChild(l.firstChild);i.length=u.length=a=r=0};return C(t),{prev:I,next:O,open:T,close:q,add:et,reset:nt,version:"1.7.1"}};return t});